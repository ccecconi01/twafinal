// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"  // <-- Mudança aqui (remover o env(...))
}

model User {
  id       Int    @id @default(autoincrement())
  username String @unique
  password String 
  role     String // "admin" ou "viewer"
}

model Partnership {
  id                      Int     @id @default(autoincrement())
  country                 String  // "País"
  institution             String  // "Instituição"
  website                 String? // "Página web"
  erasmusCode             String? // "Código Erasmus"
  areas                   String? // "Áreas"
  
  // Detalhes numéricos como String, conforme pedido ("2+2")
  studentsStudyCount      String? // "Estudantes para Estudos" (Qtde)
  studentsStudyMonths     String? // "Estudantes para Estudos" (Meses)
  studentsInternshipCount String? // "Estudantes para Estágio" (Qtde)
  studentsInternshipMonths String? // "Estudantes para Estágio" (Meses)
  staffTeachingCount      String? // "Mobilidade de Staff Ensino" (Qtde)
  staffTeachingDur        String? // "Mobilidade de Staff Ensino" (Dias)
  staffTrainingCount      String? // "Mobilidade de Staff Formação" (Qtde)
  staffTrainingDur        String? // "Mobilidade de Staff Formação" (Dias)
  
  blendedIntensive        Boolean @default(false) // Novo campo Checkbox
  
  mobilities              Mobility[]
}

model Mobility {
  id                   Int      @id @default(autoincrement())
  
  // Campos de Controle Interno
  direction            String   // "IN" ou "OUT"
  role                 String   // "STUDENT" ou "STAFF"
  type                 String   // Student: "Estudos: Longa-Duração", "Estudos: Curta-Duração", "Estagio" | Staff: "Ensino", "Formacao"
  status               String   @default("PLANNED") // "COMPLETED", "ONGOING", "PLANNED"
  school               String   // "GESTAO" ou "TECNOLOGIA"
  country              String   // País de destino/origem
  
  // Campos do OLAUpload.csv (Principais)
  candidateEmail       String
  candidateFirstName   String
  candidateLastName    String
  startDate            DateTime
  endDate              DateTime
  receivingInstitution String
  sendingInstitution   String
  
  // Relação (opcional, pois pode haver mobilidade sem parceria formal cadastrada ainda)
  partnershipId        Int?
  partnership          Partnership? @relation(fields: [partnershipId], references: [id])
}